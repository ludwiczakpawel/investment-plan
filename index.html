<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investment Analysis â€” PaweÅ‚</title>
<style>
  :root {
    --bg: #0d1117;
    --card: #161b22;
    --border: #30363d;
    --text: #e6edf3;
    --muted: #8b949e;
    --accent: #58a6ff;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
  }
  #gate {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem;
  }
  .lock-box {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 2.5rem;
    text-align: center;
    max-width: 380px;
    width: 100%;
  }
  .lock-box .emoji { font-size: 3rem; margin-bottom: 1rem; }
  .lock-box h1 { font-size: 1.3rem; margin-bottom: 0.5rem; }
  .lock-box p { color: var(--muted); font-size: 0.9rem; margin-bottom: 1.5rem; }
  .lock-box input {
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-size: 1rem;
    outline: none;
    margin-bottom: 1rem;
    text-align: center;
    letter-spacing: 2px;
  }
  .lock-box input:focus { border-color: var(--accent); }
  .lock-box button {
    width: 100%;
    padding: 0.75rem;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  .lock-box button:hover { opacity: 0.85; }
  .error { color: #f85149; font-size: 0.85rem; margin-top: 0.75rem; display: none; }
  
  #nav {
    display: none;
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--bg);
    border-bottom: 1px solid var(--border);
    padding: 1rem 2rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }
  .nav-container {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .nav-tabs {
    display: flex;
    gap: 0.5rem;
  }
  .nav-tab {
    padding: 0.6rem 1.25rem;
    border-radius: 8px;
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--muted);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    transition: all 0.2s;
    cursor: pointer;
  }
  .nav-tab:hover {
    background: rgba(88, 166, 255, 0.1);
    border-color: var(--accent);
    color: var(--text);
  }
  .nav-tab.active {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }
  .nav-logo {
    font-size: 0.85rem;
    color: var(--muted);
  }
  
  #content { display: none; }
  
  @media (max-width: 768px) {
    #nav { padding: 0.75rem 1rem; }
    .nav-container { flex-direction: column; gap: 0.75rem; }
    .nav-tabs { width: 100%; justify-content: center; }
    .nav-tab { flex: 1; text-align: center; padding: 0.5rem 0.75rem; font-size: 0.8rem; }
  }
</style>
</head>
<body>

<div id="gate">
  <div class="lock-box">
    <div class="emoji">ðŸ”’</div>
    <h1>Investment Analysis</h1>
    <p>Enter password to view your portfolio analysis</p>
    <input type="password" id="pw" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" autofocus>
    <button onclick="unlock()">Unlock</button>
    <div class="error" id="err">Wrong password. Try again.</div>
  </div>
</div>

<div id="nav">
  <div class="nav-container">
    <div class="nav-tabs">
      <a class="nav-tab" onclick="loadVersion('v2')" id="tab-v2">
        ðŸ§  Deep Analysis
      </a>
      <a class="nav-tab" onclick="loadVersion('v1')" id="tab-v1">
        ðŸŽ¯ Quick Plan
      </a>
    </div>
    <div class="nav-logo">
      PaweÅ‚'s Portfolio Â· Jan 2026
    </div>
  </div>
</div>

<div id="content"></div>

<script>
// Simple hash-based gate. Not military-grade, but keeps random visitors out.
const HASH = '8ecf919a1d9eb2a1f2c5a111b2610bc331d71bd458ccaca012cc974f1077ec98';

let currentVersion = 'v2'; // Default to deep analysis

async function sha256(msg) {
  const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(msg));
  return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, '0')).join('');
}

async function unlock() {
  const pw = document.getElementById('pw').value;
  const hash = await sha256(pw);
  if (hash === HASH) {
    sessionStorage.setItem('investment-plan-auth', 'true');
    document.getElementById('gate').style.display = 'none';
    document.getElementById('nav').style.display = 'block';
    // Load default version (v2 - deep analysis)
    await loadVersion('v2');
  } else {
    document.getElementById('err').style.display = 'block';
    document.getElementById('pw').value = '';
    document.getElementById('pw').focus();
  }
}

// Auto-unlock if already authenticated this session
if (sessionStorage.getItem('investment-plan-auth') === 'true') {
  document.getElementById('gate').style.display = 'none';
  document.getElementById('nav').style.display = 'block';
  loadVersion('v2');
}

async function loadVersion(version) {
  currentVersion = version;
  
  // Update active tab
  document.getElementById('tab-v1').classList.remove('active');
  document.getElementById('tab-v2').classList.remove('active');
  document.getElementById(`tab-${version}`).classList.add('active');
  
  // Determine which file to load
  const file = version === 'v1' ? 'plan-content.html' : 'deep-analysis.html';
  
  // Fetch and display content
  const resp = await fetch(file);
  const html = await resp.text();
  
  // Extract body content and styles
  const parser = new DOMParser();
  const doc = parser.parseFromString(html, 'text/html');
  
  // Remove any existing imported styles
  const existingStyles = document.querySelectorAll('style[data-imported]');
  existingStyles.forEach(s => s.remove());
  
  // Add new styles
  const style = doc.querySelector('style');
  if (style) {
    const importedStyle = style.cloneNode(true);
    importedStyle.setAttribute('data-imported', 'true');
    document.head.appendChild(importedStyle);
  }
  
  // Extract only the #content div from the fetched page (skip any gate/password divs)
  const fetchedContent = doc.getElementById('content');
  const content = document.getElementById('content');
  content.innerHTML = fetchedContent ? fetchedContent.innerHTML : doc.body.innerHTML;
  content.style.display = 'block';
  
  // Scroll to top
  window.scrollTo(0, 0);
}

document.addEventListener('keydown', e => { 
  if (e.key === 'Enter' && document.getElementById('gate').style.display !== 'none') {
    unlock();
  }
});
</script>
</body>
</html>
